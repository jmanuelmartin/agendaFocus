<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üì∏ | FOCUS RIO CUARTO</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="focus.jpg" alt="Logo Focus" class="logo" style="height:56px; width:auto; border-radius:12px;">
            
            <div id="connectionStatus" class="connection-status">
                <div class="status-dot"></div>
                <span>Conectado a Firebase</span>
            </div>

            <!-- Firebase Setup Instructions -->
            <div id="firebaseSetup" class="firebase-setup">
                <h3>üî• Configuraci√≥n de Firebase</h3>
                <p><strong>1.</strong> Ve a <a href="https://console.firebase.google.com" target="_blank">Firebase Console</a></p>
                <p><strong>2.</strong> Crea un nuevo proyecto o selecciona uno existente</p>
                <p><strong>3.</strong> Habilita Firestore Database en modo de prueba</p>
                <p><strong>4.</strong> Ve a Configuraci√≥n del proyecto > Configuraci√≥n general > Tus apps > Web</p>
                <p><strong>5.</strong> Copia la configuraci√≥n y p√©gala abajo:</p>
                
                <div class="form-grid">
                    <div class="form-group">
                        <label>API Key</label>
                        <input type="text" id="firebaseApiKey" placeholder="AIza...">
                    </div>
                    <div class="form-group">
                        <label>Project ID</label>
                        <input type="text" id="firebaseProjectId" placeholder="tu-proyecto-123">
                    </div>
                    <div class="form-group">
                        <label>App ID</label>
                        <input type="text" id="firebaseAppId" placeholder="1:123...">
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="initializeFirebase()">üöÄ Conectar Firebase</button>
                <button class="btn btn-secondary" onclick="skipFirebase()">‚è≠Ô∏è Usar sin Firebase</button>
            </div>

            <div class="nav-tabs">
                <div class="nav-tabs-row">
                    <button class="nav-tab active" onclick="showTab('dashboard', this)">Dashboard</button>
                    <button class="nav-tab" onclick="showTab('calendar', this)">Calendario</button>
                    <button class="nav-tab" onclick="showTab('events', this)">Eventos</button>
                </div>
                <div class="nav-tabs-row">
                    <button class="nav-tab" onclick="showTab('checklist', this)">Checklist</button>
                    <button class="nav-tab" onclick="showTab('planilla', this)">Planilla</button>
                    <button class="nav-tab" onclick="showTab('config', this)">Configuraci√≥n</button>
                </div>
            </div>
        </div>

        <!-- Dashboard Tab -->
        <div id="dashboard" class="tab-content active">
            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3>Sesiones Hoy</h3>
                    <div class="number" id="todaySessions">0</div>
                    <p>Programadas para hoy</p>
                </div>
                <div class="dashboard-card">
                    <h3>Esta Semana</h3>
                    <div class="number" id="weekEvents">0</div>
                    <p>Eventos programados</p>
                </div>
                <div class="dashboard-card">
                    <h3>Eventos Activos</h3>
                    <div class="number" id="activeEvents">0</div>
                    <p>En proceso</p>
                </div>
            </div>

            <div class="calendar-container">
                <h3>Pr√≥ximas Sesiones</h3>
                <div id="upcomingSessions"></div>
            </div>
        </div>

        <!-- Calendar Tab -->
        <div id="calendar" class="tab-content">
            <div class="calendar-header">
                <button class="calendar-nav" onclick="previousMonth()">‚Äπ Anterior</button>
                <h3 id="currentMonth">Enero 2024</h3>
                <button class="calendar-nav" onclick="nextMonth()">Siguiente ‚Ä∫</button>
            </div>
            <div class="calendar-grid" id="calendarGrid">
                <!-- Calendar will be generated here -->
            </div>
            <div style="margin-top: 20px;">
                <button class="btn btn-primary" onclick="openSessionModal()">+ Nueva Sesi√≥n</button>
            </div>
        </div>

        <!-- Events Tab -->
        <div id="events" class="tab-content">
            <div style="margin-bottom: 20px;">
                <button class="btn btn-primary" onclick="openEventModal()">+ Nuevo Evento</button>
            </div>
            <div id="eventsList" class="events-list">
                <!-- Events will be listed here -->
            </div>
        </div>

        <!-- Checklist Tab -->
        <div id="checklist" class="tab-content">
            <div style="margin-bottom: 20px;">
                <button class="btn btn-primary" onclick="openChecklistModal()">+ Nueva Checklist</button>
            </div>
            <div id="checklistContainer" class="checklist-container">
                <!-- Checklists will be displayed here -->
            </div>
        </div>

        <!-- Planilla Tab -->
        <div class="tab-content" id="planilla">
            <h2>Planilla de Eventos</h2>
            <div>
                <table id="planillaTable" class="planilla-table">
                    <thead>
                        <tr>
                            <th>Nombre y Apellido</th>
                            <th>Fecha de la Fiesta</th>
                            <th>Lugar de la Fiesta</th>
                            <th>Servicios Contratados</th>
                            <th>Otros</th>
                            <th>Sesiones Realizadas</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Aqu√≠ se llenar√°n las filas din√°micamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Config Tab -->
        <div id="config" class="tab-content">
            <h3>Configuraci√≥n del Sistema</h3>
            <div class="form-grid">
                <div class="form-group">
                    <label>Fot√≥grafos/Equipos</label>
                    <div id="photographersList"></div>
                    <div style="display: flex; gap: 8px; margin-top: 8px;">
                        <input type="text" id="newPhotographer" placeholder="Nombre del fot√≥grafo" style="flex:1;">
                        <button class="btn btn-secondary" onclick="addPhotographer()">Agregar Fot√≥grafo</button>
                    </div>
                </div>
                <div class="form-group">
                    <label>Servicios/Paquetes</label>
                    <div id="servicesList"></div>
                    <div style="display: flex; gap: 8px; margin-top: 8px;">
                        <input type="text" id="newService" placeholder="Nombre del servicio" style="flex:1;">
                        <button class="btn btn-secondary" onclick="addService()">Agregar Servicio</button>
                    </div>
                </div>
            <div style="margin-top: 30px;">
                <div class="config-actions">
                    <button class="btn btn-primary" onclick="syncWithFirebase()">üîÑ Sincronizar Firebase</button>
                    <button class="btn btn-primary" onclick="exportData()">üì§ Exportar Datos</button>
                    <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData()">
                    <button class="btn btn-primary" onclick="document.getElementById('importFile').click()">üì• Importar Datos</button>
                    <button class="btn btn-danger" onclick="clearAllData()">üóëÔ∏è Limpiar Datos</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Session Modal -->
    <div id="sessionModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('sessionModal')">&times;</span>
            <h2>Nueva Sesi√≥n</h2>
            <form id="sessionForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Evento</label>
                        <select id="sessionEvent" required></select>
                    </div>
                    <div class="form-group">
                        <label>Fecha</label>
                        <input type="date" id="sessionDate" required>
                    </div>
                    <div class="form-group">
                        <label>Hora</label>
                        <input type="time" id="sessionTime" required>
                    </div>
                    <div class="form-group">
                        <label>Fot√≥grafo</label>
                        <select id="sessionPhotographer" required></select>
                    </div>
                    <div class="form-group">
                        <label>Lugar</label>
                        <input type="text" id="sessionLocation" required>
                    </div>
                    <div class="form-group">
                        <label>Notas</label>
                        <textarea id="sessionNotes" rows="3"></textarea>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Guardar Sesi√≥n</button>
            </form>
        </div>
    </div>

    <!-- Event Modal -->
    <div id="eventModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('eventModal')">&times;</span>
            <h2>Nuevo Evento</h2>
            <form id="eventForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Nombre del Cliente</label>
                        <input type="text" id="eventClient" required>
                    </div>
                    <div class="form-group">
                        <label>Tel√©fono</label>
                        <input type="tel" id="eventPhone" required>
                    </div>
                    <div class="form-group">
                        <label>Tipo de Evento</label>
                        <input type="text" id="eventType" required>
                    </div>
                    <div class="form-group">
                        <label>Servicio Contratado</label>
                        <select id="eventService" required></select>
                    </div>
                    <div class="form-group">
                        <label>Fecha del Evento</label>
                        <input type="date" id="eventDate" required>
                    </div>
                    <div class="form-group">
                        <label>Lugar del Evento</label>
                        <input type="text" id="eventLocation" required>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Crear Evento</button>
            </form>
        </div>
    </div>

    <!-- Checklist Modal -->
    <div id="checklistModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('checklistModal')">&times;</span>
            <h2>Nueva Checklist</h2>
            <form id="checklistForm">
                <div class="form-grid">
                    <div class="form-group">
                        <label>Cliente</label>
                        <select id="checklistClient" required></select>
                    </div>
                </div>
                <button type="submit" class="btn btn-primary">Crear Checklist</button>
            </form>
        </div>
    </div>

    <div class="loading" style="display: none;">
        <div class="spinner"></div>
        <span>Cargando...</span>
    </div>

    <!-- Modal de informaci√≥n de evento -->
    <div id="eventInfoModal" class="modal">
    <div class="modal-content" id="eventInfoContent">
        <span class="close" onclick="closeModal('eventInfoModal')">&times;</span>
        <!-- Aqu√≠ se llenar√° la info del evento din√°micamente -->
    </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-app-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.23.0/firebase-firestore-compat.min.js"></script>
    <script src="index.js"></script>
</body>
</html>